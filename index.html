<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ë‹¬ë¦¬ê³  ì¡ê¸° (Tag Game)</title>
    <link rel="stylesheet" href="style.css">
    <!-- [Debug] Early Error Handler -->
    <script>
        window.onerror = function (msg, url, line, col, error) {
            // DOMì´ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ window.onload ì´í›„ì— ì²˜ë¦¬í•˜ê±°ë‚˜
            // document.writeë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  consoleê³¼ alert ë³‘í–‰
            const errorMsg = `[JS Error] ${msg}\nLine: ${line}`;
            console.error(errorMsg);

            // ì˜¤ë²„ë ˆì´ê°€ ìˆìœ¼ë©´ í‘œì‹œ, ì—†ìœ¼ë©´ ìƒì„± ì‹œë„
            let overlay = document.getElementById('debug-overlay');
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.id = 'debug-overlay';
                overlay.style.cssText = "position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);color:red;z-index:99999;white-space:pre-wrap;padding:20px;pointer-events:none;";
                document.body ? document.body.appendChild(overlay) : (document.documentElement.appendChild(overlay));
            }
            overlay.style.display = 'block';
            overlay.innerText += errorMsg + "\n\n";
            return false;
        };
    </script>
</head>

<body>
    <!-- ì„œë²„ ë¡œë”© ì•ˆë‚´ (Render Sleep ë°©ì§€ìš©) -->
    <div id="server-loading-overlay">
        <div class="loading-content">
            <h2>ğŸŒ ì„œë²„ì™€ ì—°ê²° ì¤‘ì…ë‹ˆë‹¤...</h2>
            <p>ì„œë²„ê°€ ì ë“¤ì–´ ìˆë‹¤ë©´ ê¹¨ìš°ëŠ” ë° ìµœëŒ€ 1ë¶„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p>ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”! ğŸ’¤â°</p>
            <div class="spinner"></div>
        </div>
    </div>

    <!-- ê²°ê³¼ í™”ë©´ (Podium) -->
    <div id="result-screen"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 100; flex-direction: column; align-items: center; justify-content: center;">
        <h1 id="result-title"
            style="color: white; font-size: 3rem; margin-bottom: 30px; text-shadow: 0 0 10px #f1c40f;">GAME RESULT</h1>

        <div id="podium-container" style="display: flex; align-items: flex-end; gap: 20px; margin-bottom: 40px;">
            <!-- Silver -->
            <div class="podium-item" style="display: flex; flex-direction: column; align-items: center;">
                <div id="winner-silver-name"
                    style="color: #bdc3c7; font-weight: bold; margin-bottom: 10px; font-size: 1.2rem;">-</div>
                <div
                    style="width: 80px; height: 120px; background: linear-gradient(to bottom, #bdc3c7, #7f8c8d); border-radius: 5px 5px 0 0; display: flex; justify-content: center; align-items: center; color: #2c3e50; font-size: 2rem; font-weight: bold; box-shadow: 0 0 15px rgba(189, 195, 199, 0.5);">
                    2</div>
            </div>
            <!-- Gold -->
            <div class="podium-item" style="display: flex; flex-direction: column; align-items: center;">
                <div id="winner-gold-name"
                    style="color: #f1c40f; font-weight: bold; margin-bottom: 10px; font-size: 1.5rem;">-</div>
                <div
                    style="width: 100px; height: 160px; background: linear-gradient(to bottom, #f1c40f, #f39c12); border-radius: 5px 5px 0 0; display: flex; justify-content: center; align-items: center; color: #d35400; font-size: 3rem; font-weight: bold; box-shadow: 0 0 20px rgba(241, 196, 15, 0.6); position: relative;">
                    1
                    <span style="position: absolute; top: -40px; font-size: 2rem;">ğŸ‘‘</span>
                </div>
            </div>
            <!-- Bronze -->
            <div class="podium-item" style="display: flex; flex-direction: column; align-items: center;">
                <div id="winner-bronze-name"
                    style="color: #cd7f32; font-weight: bold; margin-bottom: 10px; font-size: 1.2rem;">-</div>
                <div
                    style="width: 80px; height: 90px; background: linear-gradient(to bottom, #cd7f32, #a0522d); border-radius: 5px 5px 0 0; display: flex; justify-content: center; align-items: center; color: #5d4037; font-size: 2rem; font-weight: bold; box-shadow: 0 0 15px rgba(205, 127, 50, 0.5);">
                    3</div>
            </div>
        </div>

        <div id="result-stats" style="color: #eee; text-align: center; line-height: 1.6; font-size: 1.1rem;"></div>
        <button id="result-close-btn"
            style="margin-top: 30px; padding: 10px 30px; font-size: 1.2rem; cursor: pointer; background: #3498db; color: white; border: none; border-radius: 5px;">ë‹«ê¸°</button>
    </div>

    <!-- [New] í­íƒ„ ëª¨ë“œ ì „ìš© ì˜¬ë¦¼í”½ ê²°ê³¼íŒ -->
    <div id="bomb-result-screen"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 101; flex-direction: column; align-items: center; justify-content: center;">
        <h1 style="color: #f1c40f; font-size: 3rem; margin-bottom: 20px; text-shadow: 0 0 20px gold;">ğŸ† Bomb Mode
            Winner ğŸ†</h1>

        <div style="display: flex; align-items: flex-end; gap: 30px; margin-bottom: 40px;">
            <!-- Silver (2nd) -->
            <div style="display: flex; flex-direction: column; align-items: center;">
                <div id="bomb-rank-2-name"
                    style="color: #bdc3c7; font-size: 1.5rem; font-weight: bold; margin-bottom: 15px;">-</div>
                <div
                    style="width: 100px; height: 150px; background: linear-gradient(#bdc3c7, #7f8c8d); display: flex; justify-content: center; align-items: center; font-size: 3rem; font-weight: bold; color: #2c3e50; border-radius: 10px 10px 0 0; box-shadow: 0 0 20px rgba(255,255,255,0.2);">
                    2</div>
            </div>

            <!-- Gold (1st) -->
            <div style="display: flex; flex-direction: column; align-items: center;">
                <div id="bomb-rank-1-name"
                    style="color: #f1c40f; font-size: 2rem; font-weight: bold; margin-bottom: 15px;">-</div>
                <div
                    style="width: 120px; height: 200px; background: linear-gradient(#f1c40f, #f39c12); display: flex; justify-content: center; align-items: center; font-size: 4rem; font-weight: bold; color: #d35400; border-radius: 10px 10px 0 0; box-shadow: 0 0 30px rgba(255, 215, 0, 0.6); position: relative;">
                    1
                    <div style="position: absolute; top: -50px; font-size: 3rem;">ğŸ‘‘</div>
                </div>
            </div>

            <!-- Bronze (3rd) -->
            <div style="display: flex; flex-direction: column; align-items: center;">
                <div id="bomb-rank-3-name"
                    style="color: #cd7f32; font-size: 1.5rem; font-weight: bold; margin-bottom: 15px;">-</div>
                <div
                    style="width: 100px; height: 120px; background: linear-gradient(#cd7f32, #a0522d); display: flex; justify-content: center; align-items: center; font-size: 3rem; font-weight: bold; color: #5d4037; border-radius: 10px 10px 0 0; box-shadow: 0 0 20px rgba(205, 127, 50, 0.4);">
                    3</div>
            </div>
        </div>

        <button id="bomb-result-close-btn"
            style="margin-top: 20px; padding: 15px 40px; font-size: 1.5rem; background: #e74c3c; color: white; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);">ë‹«ê¸°</button>
    </div>

    <!-- [New] ì–¼ìŒë•¡ ëª¨ë“œ ì „ìš© ê²°ê³¼íŒ -->
    <div id="ice-result-screen"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 102; flex-direction: column; align-items: center; justify-content: center;">

        <h1 id="ice-result-title"
            style="color: #3498db; font-size: 3rem; margin-bottom: 20px; text-shadow: 0 0 20px #2980b9; text-align: center; width: 100%;">
            ğŸ¥¶ ì–¼ìŒë•¡ ì¢…ë£Œ!
        </h1>

        <!-- 4ê°€ì§€ ëª…ì˜ˆì˜ ì „ë‹¹ -->
        <div style="display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; width: 90%;">

            <!-- 1. ìˆ ë˜ -->
            <div class="award-card" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                <div class="award-icon">ğŸ‘º</div>
                <div class="award-title">ì´ë²ˆ íŒ ìˆ ë˜</div>
                <div id="ice-rank-tagger" class="award-name">-</div>
                <div class="award-val">-</div>
            </div>

            <!-- 2. ëˆˆì‚¬ëŒ (ì–¼ìŒ ìµœë‹¤ ì‚¬ìš©) -->
            <div class="award-card" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                <div class="award-icon">â›„</div>
                <div class="award-title">ëˆˆì‚¬ëŒ (ìµœë‹¤ ì–¼ìŒ)</div>
                <div id="ice-rank-iceking" class="award-name">-</div>
                <div id="ice-val-iceking" class="award-val">0íšŒ</div>
            </div>

            <!-- 3. í”„ë¡œ ëŸ¬ë„ˆ (ìµœë‹¤ ì´ë™) -->
            <div class="award-card" style="background: linear-gradient(135deg, #f1c40f, #f39c12);">
                <div class="award-icon">ğŸƒ</div>
                <div class="award-title">í”„ë¡œ ëŸ¬ë„ˆ (ìµœë‹¤ ì´ë™)</div>
                <div id="ice-rank-runner" class="award-name">-</div>
                <div id="ice-val-runner" class="award-val">0px</div>
            </div>

            <!-- 4. í”„ë¡œ êµ¬ì›ì (ìµœë‹¤ êµ¬ì¶œ) -->
            <div class="award-card" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                <div class="award-icon">ğŸš‘</div>
                <div class="award-title">í”„ë¡œ êµ¬ì›ì (ìµœë‹¤ êµ¬ì¶œ)</div>
                <div id="ice-rank-savior" class="award-name">-</div>
                <div id="ice-val-savior" class="award-val">0íšŒ</div>
            </div>

        </div>

        <button id="ice-result-close-btn"
            style="margin-top: 30px; padding: 15px 40px; font-size: 1.5rem; background: #3498db; color: white; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);">ë‹«ê¸°</button>
    </div>

    <!-- ìŠ¤íƒ€ì¼ ì¶”ê°€ (ì„ì‹œ) -->
    <style>
        .award-card {
            width: 220px;
            height: 280px;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s;
            padding: 20px;
            text-align: center;
        }

        .award-card:hover {
            transform: translateY(-5px);
        }

        .award-icon {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .award-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .award-name {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        .award-val {
            font-size: 1rem;
            opacity: 0.8;
        }
    </style>
    </div>

    <!-- ë‹‰ë„¤ì„ ì…ë ¥ í™”ë©´ -->
    <div id="login-screen" style="display: none;"> <!-- ì´ˆê¸°ì—” ìˆ¨ê¹€ (ì—°ê²°ë˜ë©´ ë³´ì„) -->
        <h1>ğŸƒ ë‹¬ë¦¬ê³  ì¡ê¸° v1.4.0 (íŠ¹ìˆ˜ íƒ€ì¼ ì¶”ê°€!)</h1>
        <div style="margin-bottom: 20px;">
            <input type="text" id="nickname-input" placeholder="ë‹‰ë„¤ì„ (ìµœëŒ€ 10ì)" maxlength="10">
            <input type="color" id="color-input" value="#e74c3c" title="ìºë¦­í„° ìƒ‰ìƒ ì„ íƒ">
        </div>
        <button id="start-btn">ê²Œì„ ì‹œì‘</button>
        <p id="connection-count" style="margin-top: 15px; color: #bbb; font-size: 14px; font-weight: bold;">í˜„ì¬ ì ‘ì†ì: -ëª…
        </p>
    </div>

    <!-- ê²Œì„ í™”ë©´ -->
    <div id="game-container" style="display: none;">
        <!-- ë¯¸ë‹ˆë§µ ì˜¤ë²„ë ˆì´ -->
        <div id="minimap-overlay"
            style="display:none; position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); z-index:20; background:rgba(0,0,0,0.9); padding:10px; border:2px solid #555; border-radius:10px; text-align:center;">
            <h2 style="color:white; margin:0 0 10px 0;">Minimap</h2>
            <canvas id="minimap-canvas" width="600" height="600" style="background:#000;"></canvas>
            <p style="color:#aaa; margin:5px 0 0 0;">Press ESC to close</p>
        </div>
        <h1>ë‹¬ë¦¬ê³  ì¡ê¸° v1.4.0 (íŠ¹ìˆ˜ íƒ€ì¼ ì¶”ê°€!)</h1>
        <div id="game-message">ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤!</div>
        <div id="tagged-overlay"></div>

        <div id="main-content" style="display: flex; gap: 20px; justify-content: center; align-items: flex-start;">
            <!-- ê²Œì„ ìº”ë²„ìŠ¤ -->
            <div>
                <canvas id="gameCanvas" width="1024" height="768"></canvas>
                <p>ë°©í–¥í‚¤(WASD)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›€ì§ì´ì„¸ìš”.</p>
            </div>

            <!-- ì±„íŒ…ì°½ -->
            <div id="chat-container">
                <div id="chat-messages"></div>
                <input type="text" id="chat-input" placeholder="ë©”ì‹œì§€ ì…ë ¥ (Enter)" maxlength="50">
            </div>
        </div>

        <div id="error-log"></div>
        <div id="status-indicator"></div>

        <!-- ëª¨ë°”ì¼ ì»¨íŠ¸ë¡¤ (ì¡°ì´ìŠ¤í‹± & ë²„íŠ¼) -->
        <div id="mobile-controls">
            <div id="joystick-zone"></div>
            <button id="mobile-item-btn">âš¡ USE</button>
        </div>

        <!-- Nipple.js (Virtual Joystick) -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/nipplejs/0.10.1/nipplejs.min.js"></script>
    </div>

    <!-- ê°€ì´ë“œ ë²„íŠ¼ & ëª¨ë‹¬ -->
    <button id="guide-btn"
        style="position: fixed; top: 20px; right: 130px; padding: 10px 15px; border-radius: 20px; border: none; background: #2980b9; color: white; font-weight: bold; cursor: pointer; z-index: 1000; box-shadow: 0 4px 6px rgba(0,0,0,0.2);">?
        ê°€ì´ë“œ</button>

    <div id="guide-modal" class="modal" style="display: none;">
        <div class="modal-content guide-content">
            <span class="close-btn" id="guide-close">&times;</span>
            <h2>ğŸ“– ê²Œì„ ê°€ì´ë“œ</h2>

            <!-- íƒ­ í—¤ë” -->
            <div class="tab-header" style="display: flex; border-bottom: 2px solid #ddd; margin-bottom: 15px;">
                <div class="tab-btn active" onclick="openTab(event, 'tab-basic')"
                    style="flex: 1; text-align: center; padding: 10px; cursor: pointer; font-weight: bold; border-bottom: 3px solid #3498db; color: #3498db; transition: all 0.3s;">
                    ê¸°ë³¸/ì•„ì´í…œ</div>
                <div class="tab-btn" onclick="openTab(event, 'tab-modes')"
                    style="flex: 1; text-align: center; padding: 10px; cursor: pointer; font-weight: bold; color: #7f8c8d; border-bottom: 3px solid transparent; transition: all 0.3s;">
                    ê²Œì„ ëª¨ë“œ</div>
            </div>

            <!-- íƒ­ 1: ê¸°ë³¸/ì•„ì´í…œ -->
            <div id="tab-basic" class="tab-content" style="display: block;">
                <div class="guide-section">
                    <h3>ğŸ’ ì•„ì´í…œ ë„ê°</h3>
                    <ul>
                        <li><span class="icon">âš¡</span> <strong>ìŠ¤í”¼ë“œ</strong>: 5ì´ˆê°„ ì´ë™ ì†ë„ê°€ ì—„ì²­ ë¹¨ë¼ì§‘ë‹ˆë‹¤.</li>
                        <li><span class="icon">ğŸŒ</span> <strong>ë°”ë‚˜ë‚˜</strong>: ë°Ÿìœ¼ë©´ ë¯¸ë„ëŸ¬ì ¸ì„œ ì œì–´ê°€ ì•ˆ ë©ë‹ˆë‹¤.</li>
                        <li><span class="icon">ğŸ›¡ï¸</span> <strong>ë°©ì–´ë§‰</strong>: ìˆ ë˜ì—ê²Œ í•œë²ˆ ì¡íˆëŠ” ê±¸ ë§‰ì•„ì¤ë‹ˆë‹¤. (ë‹¤ë¥¸ ì•„ì´í…œ íšë“ ì‹œ í•´ì œë¨)
                        </li>
                    </ul>
                </div>

                <div class="guide-section">
                    <h3>ğŸ¤– ë´‡ ì„±ê²© ë¶„ì„</h3>
                    <ul>
                        <li><strong style="color:#e74c3c">ê³µê²©í˜• (Aggressive)</strong>: ì§‘ìš”í•˜ê²Œ ì«“ì•„ì˜¤ë©° ìŠ¤í”¼ë“œ ì•„ì´í…œì„ ì¢‹ì•„í•©ë‹ˆë‹¤.</li>
                        <li><strong style="color:#f1c40f">ì‹ ì¤‘í˜• (Careful)</strong>: ê²ì´ ë§ì•„ ë©€ë¦¬ì„œë¶€í„° ë„ë§ì¹˜ê³  ë°©ì–´ë§‰ì„ ì±™ê¹ë‹ˆë‹¤.</li>
                        <li><strong style="color:#9b59b6">ì¥ë‚œê¾¸ëŸ¬ê¸° (Playful)</strong>: ì˜ˆì¸¡ë¶ˆê°€! ë°”ë‚˜ë‚˜ë¥¼ ì—¬ê¸°ì €ê¸° ë¿Œë¦¬ê³  ë‹¤ë‹™ë‹ˆë‹¤.</li>
                        <li><strong style="color:#3498db">ê²ìŸì´ (Coward)</strong>: ì‚¬ëŒì´ ë³´ì´ë©´ ë¬´ì¡°ê±´ ë„ë§ê°‘ë‹ˆë‹¤! (ìˆ ë˜ëŠ” ë” ë¬´ì„œì›Œí•¨)</li>
                    </ul>
                </div>
                <p style="text-align: center; color: #7f8c8d; margin-top: 10px; font-size: 0.9em;">TIP: `/fog`ë¥¼ ì…ë ¥í•˜ë©´ ì‹œì•¼
                    ì œí•œì„
                    ë„ê³  ì¼¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>

            <!-- íƒ­ 2: ê²Œì„ ëª¨ë“œ -->
            <div id="tab-modes" class="tab-content" style="display: none;">
                <div class="guide-section" style="margin-bottom: 20px;">
                    <h3 style="color: #2c3e50;">ğŸƒâ€â™‚ï¸ í´ë˜ì‹ ìˆ ë˜ì¡ê¸° (Classic)</h3>
                    <p>ê°€ì¥ ê¸°ë³¸ì ì¸ ëª¨ë“œì…ë‹ˆë‹¤. ìˆ ë˜ë¥¼ í”¼í•´ ë„ë§ì¹˜ì„¸ìš”! ìˆ ë˜ì—ê²Œ ì¡íˆë©´ ì¦‰ì‹œ ìˆ ë˜ê°€ ë°”ë€ë‹ˆë‹¤. ìŠ¤ë¦´ ë„˜ì¹˜ëŠ” ì¶”ê²©ì „ì„ ì¦ê¸°ì„¸ìš”!</p>
                </div>

                <div class="guide-section" style="margin-bottom: 20px;">
                    <h3 style="color: #2ecc71;">ğŸ§Ÿ ì¢€ë¹„ ëª¨ë“œ (Zombie)</h3>
                    <p><strong>ìƒì¡´ ëª©í‘œ ì‹œê°„: 2ë¶„ 30ì´ˆ</strong></p>
                    <p>ê²Œì„ ì‹œì‘ ì‹œ ì¼ë¶€ í”Œë ˆì´ì–´ê°€ <strong>ìˆ™ì£¼ ì¢€ë¹„</strong>ê°€ ë©ë‹ˆë‹¤. ì¢€ë¹„ì—ê²Œ ë‹¿ìœ¼ë©´ ê°ì—¼ë˜ì–´ ê°™ì€ ì¢€ë¹„ê°€ ë©ë‹ˆë‹¤!</p>
                    <p>ëª¨ë“  ì¸ê°„ì´ ê°ì—¼ë˜ë©´ ì¢€ë¹„ ìŠ¹ë¦¬, í•œ ëª…ì´ë¼ë„ ëê¹Œì§€ ì‚´ì•„ë‚¨ìœ¼ë©´ ìƒì¡´ì ìŠ¹ë¦¬!</p>
                </div>

                <div class="guide-section">
                    <h3 style="color: #e74c3c;">ğŸ’£ í­íƒ„ ëª¨ë“œ (Bomb)</h3>
                    <p>ëœë¤í•˜ê²Œ <strong>ì‹œí•œí­íƒ„</strong>ì´ ë°°ì •ë©ë‹ˆë‹¤. ì‹œê°„ì´ 0ì´ ë˜ë©´ í‘! ğŸ’¥ íƒˆë½í•©ë‹ˆë‹¤.</p>
                    <p>í­íƒ„ì´ í„°ì§€ê¸° ì „ì— ë‹¤ë¥¸ ì‚¬ëŒê³¼ ë¶€ë”ªí˜€ í­íƒ„ì„ ë„˜ê¸°ì„¸ìš”! (í­íƒ„ì„ ë°›ìœ¼ë©´ 2ì´ˆê°„ ê¸°ì ˆí•˜ë‹ˆ ì£¼ì˜í•˜ì„¸ìš”!)</p>
                    <p>ìµœí›„ì˜ 1ì¸ì´ ë‚¨ì„ ë•Œê¹Œì§€ ê³„ì†ë©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <script>
                function openTab(evt, tabName) {
                    var contents = document.getElementsByClassName("tab-content");
                    for (var i = 0; i < contents.length; i++) {
                        contents[i].style.display = "none";
                    }
                    var tabs = document.getElementsByClassName("tab-btn");
                    for (var i = 0; i < tabs.length; i++) {
                        tabs[i].style.borderBottom = "3px solid transparent";
                        tabs[i].style.color = "#7f8c8d";
                        tabs[i].classList.remove("active");
                    }
                    document.getElementById(tabName).style.display = "block";
                    evt.currentTarget.style.borderBottom = "3px solid #3498db";
                    evt.currentTarget.style.color = "#3498db";
                    evt.currentTarget.classList.add("active");
                }
            </script>
        </div>
    </div>

    <!-- í”¼ë“œë°± ë²„íŠ¼ & ëª¨ë‹¬ -->
    <button id="feedback-btn"
        style="position: fixed; top: 20px; right: 20px; padding: 10px 15px; border-radius: 20px; border: none; background: #e67e22; color: white; font-weight: bold; cursor: pointer; z-index: 6000; box-shadow: 0 4px 6px rgba(0,0,0,0.2);">ğŸ“¢
        í”¼ë“œë°±</button>

    <!-- í”¼ë“œë°± ë²„íŠ¼ë§Œ ë‚¨ê¸°ê³  ëª¨ë‹¬ì€ ì œê±°ë¨ -->

    <!-- Socket.io ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ -->
    <!-- ê²°ê³¼íŒ ëª¨ë‹¬ -->
    <div id="resultBoard"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; color: white; flex-direction: column; align-items: center; justify-content: center; font-family: 'Noto Sans KR', sans-serif;">
        <!-- ë‹«ê¸° ë²„íŠ¼ (ììœ  íƒí—˜ìš©) -->
        <span id="closeResultBtn"
            style="position: absolute; top: 30px; right: 30px; font-size: 3rem; cursor: pointer; color: #fff; opacity: 0.7; transition: opacity 0.3s;">&times;</span>

        <h1
            style="font-size: 3rem; color: #e74c3c; margin-bottom: 20px; text-shadow: 0 0 20px red; animation: pulse 2s infinite;">
            ğŸ§Ÿ ì¸ë¥˜ ë©¸ë§ ğŸ§Ÿ</h1>
        <h2 style="margin-bottom: 40px;">ì¢€ë¹„ê°€ ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤!</h2>

        <!-- ìƒì¡´ì ë¦¬ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ (ìƒì¡´ì ìŠ¹ë¦¬ ì‹œ í‘œì‹œ) -->
        <div id="survivorListContainer"
            style="display: none; width: 80%; max-width: 800px; background: rgba(46, 204, 113, 0.2); padding: 20px; border-radius: 10px; border: 2px solid #2ecc71; margin-bottom: 20px;">
            <h3 style="color: #2ecc71; text-align: center; margin: 0 0 15px 0; font-size: 1.5rem;">ğŸ‰ ìœ„ëŒ€í•œ ìƒì¡´ìë“¤ ğŸ‰</h3>
            <div id="survivorListContent"
                style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; max-height: 150px; overflow-y: auto;">
                <!-- JSë¡œ ì±„ì›€ -->
            </div>
        </div>

        <div id="mvpGrid"
            style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 80%; max-width: 800px;">
            <!-- MVP ì¹´ë“œë“¤ -->
            <div class="mvp-card"
                style="background: #2c3e50; padding: 20px; border-radius: 10px; text-align: center; border: 2px solid #ecf0f1; box-shadow: 0 0 10px rgba(236, 240, 241, 0.3);">
                <div style="font-size: 1.5rem;">ğŸ›¡ï¸ ìƒì¡´ì™•</div>
                <div style="font-size: 0.9rem; color: #bdc3c7;">(ê°€ì¥ ì˜¤ë˜ ë²„íŒ€)</div>
                <div id="resSurvivor" style="font-size: 1.8rem; margin-top: 10px; color: #f1c40f; font-weight: bold;">-
                </div>
                <div id="resSurvivorVal" style="font-size: 1rem; margin-top: 5px;"></div>
            </div>

            <div class="mvp-card"
                style="background: #2c3e50; padding: 20px; border-radius: 10px; text-align: center; border: 2px solid #3498db; box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);">
                <div style="font-size: 1.5rem;">ğŸƒ ë„ë§ì</div>
                <div style="font-size: 0.9rem; color: #bdc3c7;">(ê°€ì¥ ë§ì´ ëœ€)</div>
                <div id="resRunner" style="font-size: 1.8rem; margin-top: 10px; color: #3498db; font-weight: bold;">-
                </div>
                <div id="resRunnerVal" style="font-size: 1rem; margin-top: 5px;"></div>
            </div>

            <div class="mvp-card"
                style="background: #2c3e50; padding: 20px; border-radius: 10px; text-align: center; border: 2px solid #e74c3c; box-shadow: 0 0 10px rgba(231, 76, 60, 0.3);">
                <div style="font-size: 1.5rem;">ğŸ¦  ìˆ™ì£¼ ì¢€ë¹„</div>
                <div style="font-size: 0.9rem; color: #bdc3c7;">(ëª¨ë“  ê²ƒì˜ ì‹œì‘)</div>
                <div id="resHost" style="font-size: 1.8rem; margin-top: 10px; color: #e74c3c; font-weight: bold;">-
                </div>
            </div>

            <div class="mvp-card"
                style="background: #2c3e50; padding: 20px; border-radius: 10px; text-align: center; border: 2px solid #9b59b6; box-shadow: 0 0 10px rgba(155, 89, 182, 0.3);">
                <div style="font-size: 1.5rem;">ğŸ‘‘ ìŠˆí¼ ì „íŒŒì</div>
                <div style="font-size: 0.9rem; color: #bdc3c7;">(ê°ì—¼ 1ë“±)</div>
                <div id="resInfector" style="font-size: 1.8rem; margin-top: 10px; color: #9b59b6; font-weight: bold;">-
                </div>
                <div id="resInfectorVal" style="font-size: 1rem; margin-top: 5px;"></div>
            </div>
        </div>

        <div style="margin-top: 40px; font-size: 1.2rem; color: #95a5a6;">
            â³ <span id="resetCountdown">10</span>ì´ˆ í›„ ê²Œì„ì´ ë¦¬ì…‹ë©ë‹ˆë‹¤...
        </div>

        <style>
            @keyframes pulse {
                0% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.05);
                }

                100% {
                    transform: scale(1);
                }
            }
        </style>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="config.js"></script>
    <script src="game.js"></script>
    <!-- Debug Error Overlay -->
    <div id="debug-overlay"
        style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);color:red;z-index:9999;display:none;pointer-events:none;white-space:pre-wrap;padding:20px;">
    </div>
    <script>
        window.onerror = function (msg, url, line, col, error) {
            const overlay = document.getElementById('debug-overlay');
            if (overlay) {
                overlay.style.display = 'block';
                overlay.innerText += `[Error] ${msg}\nLine: ${line}\n\n`;
            }
        };
    </script>
</body>

</html>